(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,a,n){e.exports=n(192)},140:function(e,a,n){},141:function(e,a,n){},189:function(e,a){},192:function(e,a,n){"use strict";n.r(a);var t=n(0),o=n.n(t),r=n(11),i=n.n(r),l=(n(140),n(58)),s=n(72),c=n(21),u=n(59),m=n(37),d=n(74),v=n(60),g=n(73),h=(n(141),n(226)),f=n(227),E=n(252),p=n(48),C=n(228),b=Object(t.createContext)(),w=b.Provider,S=b.Consumer,y=n(224),x=n(117),k=n.n(x),D=n(27),j=Object(y.a)({title:{flexGrow:1,display:"flex",alignItems:"center"}}),O=function(){var e=j();return o.a.createElement(S,null,function(a){var n=a.authenticatedUser,t=a.handleLogout;return o.a.createElement(h.a,{position:"static",color:"default"},o.a.createElement(f.a,null,o.a.createElement(E.a,{className:e.title},o.a.createElement(p.a,{component:D.b,to:"/",variant:"h6",color:"inherit",style:{marginRight:2,textDecoration:"none"}},"What's Up"),o.a.createElement(k.a,null)),n?o.a.createElement(C.a,{onClick:t,variant:"outlined",color:"secondary"},"Logout"):null))})},M=n(251),L=n(250),N=n(127),J=n(235),U=n(253),I=n(256),T=n(230),F=n(232),A=n(44),V=n.n(A),B=n(231),P=function(e){var a=e.handleMessage,n=e.open,t=e.type;return o.a.createElement(I.a,{open:n,autoHideDuration:3e3,onClose:a,anchorOrigin:{vertical:"bottom",horizontal:"left"}},o.a.createElement(T.a,{style:"success"===t?{backgroundColor:B.a[600]}:"error"===t?{backgroundColor:"#f44336"}:null,message:o.a.createElement("span",null,"success"===t?"Registered Successfully!":"Username or password did not matched"),action:[o.a.createElement(F.a,{key:"close",color:"inherit",onClick:a},o.a.createElement(V.a,null))]}))},R=function(){return o.a.createElement(S,null,function(e){var a=e.username,n=e.password,t=e.password2,r=e.validationErrors,i=e.showRegisterSuccessMessage,l=e.showLoginFailedMessage,s=e.whichSnackbar,c=e.onChange,u=e.onClick,m=e.handleMessage,d=e.errors;return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{style:{display:"flex",flexDirection:"column"},autoComplete:"off"},r.includes(0)?o.a.createElement(p.a,{variant:"caption",color:"error",align:"center"},d[0]):null,o.a.createElement(U.a,{label:"Username",name:"username",margin:"dense",variant:"outlined",onChange:c,value:a,helperText:r.includes(0)?null:r.includes(1)?d[1]:r.includes(2)?d[2]:r.includes(5)?d[5]:null,error:!r.includes(0)&&(!!r.includes(1)||!!r.includes(2)||!!r.includes(5))}),o.a.createElement(U.a,{label:"Password",name:"password",margin:"dense",variant:"outlined",onChange:c,value:n,type:"password",helperText:r.includes(0)?null:r.includes(3)?d[3]:null,error:!r.includes(0)&&!!r.includes(3)}),o.a.createElement(U.a,{label:"Confirm Password",name:"password2",margin:"dense",variant:"outlined",onChange:c,value:t,type:"password",helperText:r.includes(0)?null:r.includes(4)?d[4]:null,error:!r.includes(0)&&!!r.includes(4)}),o.a.createElement(C.a,{onClick:u,variant:"contained"},"Register")),o.a.createElement(P,{handleMessage:m,open:i||l,type:s()}))})},W=function(){return o.a.createElement(S,null,function(e){var a=e.loginUsername,n=e.loginPassword,t=e.onChange,r=e.onLogin;return o.a.createElement("form",{autoComplete:"off",style:{display:"flex",flexDirection:"column",height:"100%"}},o.a.createElement(U.a,{label:"Username",name:"loginUsername",margin:"dense",variant:"outlined",style:{flexGrow:1},onChange:t,value:a}),o.a.createElement(U.a,{label:"Password",name:"loginPassword",margin:"dense",variant:"outlined",style:{flexGrow:1},onChange:t,value:n,type:"password"}),o.a.createElement(C.a,{onClick:r,variant:"contained"},"Login"))})},G=Object(y.a)(function(e){return{introduction:{marginTop:e.spacing(2),fontWeight:500}}}),_=function(){var e=G();return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{variant:"h3",className:e.introduction,color:"primary",align:"center",gutterBottom:!0},"Login or Register to Continue"),o.a.createElement(J.a,{container:!0,spacing:4},o.a.createElement(J.a,{item:!0,xs:6},o.a.createElement(W,null)),o.a.createElement(J.a,{item:!0,xs:6},o.a.createElement(R,null))))},Y=n(84),q=n(234),z=n(241),K=n(242),H=n(243),$=n(244),Q=n(255),X=n(236),Z=n(237),ee=n(238),ae=n(122),ne=n.n(ae),te=Object(y.a)(function(e){return{rightIcon:{marginLeft:e.spacing(1)}}}),oe=function(){var e=te();return o.a.createElement(S,null,function(a){var n=a.conversationCreateDialogStatus,t=a.handleConverstaionDialog,r=a.onChange,i=a.handleConverstaionCreate,l=a.validationErrors,s=a.errors;return o.a.createElement(o.a.Fragment,null,o.a.createElement(C.a,{variant:"contained",color:"primary",onClick:t},"Start a New Conversation",o.a.createElement(ne.a,{className:e.rightIcon})),o.a.createElement(Q.a,{open:n,onClose:t},o.a.createElement(X.a,{id:"form-dialog-title"},"New Conversation"),o.a.createElement(Z.a,null,o.a.createElement(U.a,{autoFocus:!0,margin:"dense",label:"Name",type:"text",name:"conversationName",fullWidth:!0,onChange:r,autoComplete:"off",helperText:l.includes(6)?s[6]:l.includes(7)?s[7]:l.includes(9)?s[9]:null,error:!!l.includes(6)||!!l.includes(7)||!!l.includes(9)}),o.a.createElement(U.a,{margin:"dense",label:"Description (optional)",type:"text",name:"conversationDescription",fullWidth:!0,multiline:!0,rowsMax:"2",onChange:r,autoComplete:"off",helperText:l.includes(8)?s[8]:null,error:!!l.includes(8)})),o.a.createElement(ee.a,null,o.a.createElement(C.a,{onClick:t,color:"primary"},"Cancel"),o.a.createElement(C.a,{onClick:i,color:"primary"},"Create"))))})},re=n(70),ie=n.n(re),le=Object(y.a)(function(e){return{rightIcon:{marginLeft:e.spacing(1)}}}),se=function(){var e=le();return o.a.createElement(S,null,function(a){var n=a.onChange,t=a.handleConverstaionJoinDialog,r=a.conversationJoinDialogStatus,i=a.handleConverstaionJoin;return o.a.createElement(o.a.Fragment,null,o.a.createElement(C.a,{variant:"contained",color:"primary",onClick:t},"Join a Conversation",o.a.createElement(ie.a,{className:e.rightIcon})),o.a.createElement(Q.a,{open:r,onClose:t},o.a.createElement(X.a,{id:"form-dialog-title"},"Join a Conversation"),o.a.createElement(Z.a,null,o.a.createElement(U.a,{autoFocus:!0,margin:"dense",label:"Name",type:"text",name:"conversationJoinName",fullWidth:!0,onChange:n,autoComplete:"off"})),o.a.createElement(ee.a,null,o.a.createElement(C.a,{onClick:t,color:"primary"},"Cancel"),o.a.createElement(C.a,{onClick:i,color:"primary"},"Join"))))})},ce=function(){return o.a.createElement(S,null,function(e){var a=e.conversationJoinStatus,n=e.conversationInfoDialog,t=e.handleConversationJoinInfoDialogStatus,r=e.conversationJoinMessages;return o.a.createElement(Q.a,{open:n,onClose:t},o.a.createElement(Z.a,null,o.a.createElement(p.a,{variant:"body1"},-2===a?r[0]:2===a?r[1]:1===a?r[2]:0===a?r[3]:r[4])),o.a.createElement(ee.a,null,o.a.createElement(C.a,{onClick:t,color:"primary"},"OK")))})},ue=n(239),me=Object(y.a)(function(e){return{boxChat:{display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1},boxDashboard:{marginTop:e.spacing(4)}}}),de=function(e){var a=e.page,n=me();return o.a.createElement(E.a,{className:"chat"===a?n.boxChat:n.boxDashboard},o.a.createElement(ue.a,{size:50,className:n.progress,color:"secondary"}))},ve=n(47),ge=n(257),he=n(240),fe=n(124),Ee=n.n(fe),pe=n(71),Ce=n.n(pe),be=function(e){var a=e.name,n=e.id,r=Object(t.useState)(!1),i=Object(ve.a)(r,2),l=i[0],s=i[1],c=Object(t.useState)(""),u=Object(ve.a)(c,2),m=u[0],d=u[1],v=Object(t.useState)(!1),g=Object(ve.a)(v,2),h=g[0],f=g[1];return o.a.createElement(S,null,function(e){var t=e.handleLeaveConfirmation;return o.a.createElement(o.a.Fragment,null,l?o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a,{placeholder:"Type conversation name",onChange:function(e){return d(e.target.value)},error:h,autoFocus:!0}),o.a.createElement(F.a,{edge:"end",onClick:function(){m===a?(t(n),d(""),s(!l),f(!1)):f(!0)}},o.a.createElement(Ce.a,null)),o.a.createElement(F.a,{edge:"end",onClick:function(){s(!l),d(""),f(!1)}},o.a.createElement(V.a,null))):o.a.createElement(ge.a,{title:"Leave",placement:"left",TransitionComponent:he.a},o.a.createElement(F.a,{onClick:function(){s(!l),d(""),f(!1)},edge:"end"},o.a.createElement(Ee.a,null))))})},we=Object(y.a)(function(e){return{"@global":{"::-webkit-scrollbar":{width:"0.5em"},"::-webkit-scrollbar-thumb":{height:56,background:"inherit",borderRadius:4}},paper:{backgroundColor:e.palette.background.default,marginTop:10,marginBottom:10,padding:10,textAlign:"center",display:"flex",flexDirection:"column",flexGrow:1,overflow:"auto"},buttons:Object(c.a)({display:"flex",justifyContent:"space-evenly"},e.breakpoints.down("xs"),{flexDirection:"column",flexBasis:100}),conversations:{overflowY:"auto","&:hover":{"&::-webkit-scrollbar-thumb":{background:"#cecece"}}}}}),Se=function(){var e=we();return o.a.createElement(S,null,function(a){var n=a.authenticatedUser,t=a.conversationList;return o.a.createElement(Y.a,{className:e.paper,elevation:10},o.a.createElement(p.a,{variant:"h4",gutterBottom:!0},"Welcome ",n.username),o.a.createElement(E.a,{className:e.buttons},o.a.createElement(oe,null),o.a.createElement(se,null),o.a.createElement(ce,null)),-1===t?o.a.createElement(de,{page:"dashboard"}):0===t.length?o.a.createElement(p.a,{variant:"h4"},"You do not have any conversations"):o.a.createElement(q.a,{component:"nav",className:e.conversations},o.a.createElement(z.a,{disableSticky:!0},"My Conversations"),t.map(function(e){return o.a.createElement(K.a,{component:D.b,to:{pathname:"/chat",state:{selectedConversation:Object(l.a)({},e)}},key:e.id,button:!0,divider:!0},o.a.createElement(H.a,{primary:e.name}),o.a.createElement($.a,null,o.a.createElement(be,{name:e.name,id:e.id})))})))})},ye=function(){return o.a.createElement(p.a,{variant:"h2",color:"error",align:"center"},"404 Not Found")},xe=n(38),ke=n(28),De=n.n(ke),je=n(45),Oe=function(e){var a=e.component,n=Object(je.a)(e,["component"]);return o.a.createElement(S,null,function(e){var t=e.authenticatedUser;return o.a.createElement(xe.b,Object.assign({},n,{render:function(e){return t?o.a.createElement(a,e):o.a.createElement(xe.a,{to:"/"})}}))})},Me=function(e){var a=e.component,n=Object(je.a)(e,["component"]);return o.a.createElement(S,null,function(e){var t=e.authenticatedUser;return o.a.createElement(xe.b,Object.assign({},n,{render:function(e){return t?o.a.createElement(xe.a,{to:"/dashboard"}):o.a.createElement(a,e)}}))})},Le=function(e){var a=e.component,n=e.location.state,t=Object(je.a)(e,["component","location"]);return o.a.createElement(S,null,function(e){var r=e.authenticatedUser,i=e.goToConversation,l=e.updateConversation,s=e.clearActiveConversation;return o.a.createElement(xe.b,Object.assign({},t,{render:function(e){return r?n?o.a.createElement(a,Object.assign({},e,{goToConversation:i,updateConversation:l,clearActiveConversation:s})):o.a.createElement(xe.a,{to:"/dashboard"}):o.a.createElement(xe.a,{to:"/"})}}))})},Ne=n(245),Je=n(246),Ue=n(247),Ie=Object(y.a)(function(e){var a;return{own:{alignSelf:"flex-end",backgroundColor:"#eaeaea"},other:{alignSelf:"flex-start",backgroundColor:"#EEF3FF"},bubble:(a={width:"50%",margin:e.spacing(2)},Object(c.a)(a,e.breakpoints.down("xs"),{width:"100%",margin:0}),Object(c.a)(a,"flex","none"),Object(c.a)(a,"wordBreak","break-all"),a),cardContent:{display:"flex",flexDirection:"column"},messageArea:{marginTop:10,padding:10,borderStyle:"solid",borderRadius:4},ownMessageArea:{borderColor:"#d0d0d0",backgroundColor:"#f0f0f0"},otherMessageArea:{borderColor:"#bbcfff8c",backgroundColor:"#f3f6ff"},infoBox:{display:"flex",alignItems:"center",flexGrow:1},iconButton:{padding:0},username:{marginLeft:10,marginRight:10},mobileInfoBox:Object(c.a)({},e.breakpoints.down("xs"),{flexDirection:"row-reverse"}),mobileInnerInfoBox:Object(c.a)({},e.breakpoints.down("xs"),{flexGrow:0,flexDirection:"row-reverse"}),mobileDate:Object(c.a)({},e.breakpoints.down("xs"),{flexGrow:1})}}),Te=function(e){var a=e.own,n=e.content,r=e.username,i=e.createdAt,l=e.calcAgo,s=Ie(),c=Object(t.useState)(l(i)),u=Object(ve.a)(c,2),m=u[0],d=u[1];return Object(t.useEffect)(function(){setInterval(function(){return d(l(i))},6e4)},[l,i]),o.a.createElement(Ne.a,{className:"".concat(a?s.own:s.other," ").concat(s.bubble)},o.a.createElement(Je.a,{className:s.cardContent},o.a.createElement(E.a,{className:"".concat(s.infoBox," ").concat(a?s.mobileInfoBox:null)},o.a.createElement(E.a,{className:"".concat(s.infoBox," ").concat(a?s.mobileInnerInfoBox:null)},o.a.createElement(F.a,{className:s.iconButton},o.a.createElement(Ue.a,null,r[0].toUpperCase())),o.a.createElement(p.a,{color:"textSecondary",className:s.username},r)),o.a.createElement(p.a,{color:"textSecondary",className:a?s.mobileDate:null},m)),o.a.createElement(E.a,{className:"".concat(a?s.ownMessageArea:s.otherMessageArea," ").concat(s.messageArea)},n)))},Fe=Object(y.a)({paper:{display:"flex",flexDirection:"column",height:500,overflowY:"scroll",flexGrow:1}}),Ae=function(){var e=Fe(),a=Object(t.useRef)();return Object(t.useEffect)(function(){a.current&&a.current.scrollIntoView({behavior:"smooth"})}),o.a.createElement(S,null,function(n){var t=n.activeConversation,r=n.authenticatedUser,i=n.calculateTimesAgo;return o.a.createElement(o.a.Fragment,null,null===t?null:-1===t?null:o.a.createElement(E.a,{className:e.paper},t.messages.map(function(e){return o.a.createElement(Te,{key:e._id,content:e.content,own:e.sentBy._id===r._id,username:e.sentBy.username,calcAgo:i,createdAt:e.createdAt})}),o.a.createElement("div",{ref:a})))})},Ve=n(125),Be=n.n(Ve),Pe=n(248),Re=n(249),We=n(83),Ge=n.n(We),_e=function(){return o.a.createElement(S,null,function(e){var a=e.handleConversationSettingsDialog,n=e.conversationSettingsDialogStatus,t=e.activeConversation,r=e.newUser,i=e.authenticatedUser;return o.a.createElement(Q.a,{open:n,onClose:a,fullWidth:!0,maxWidth:"xs"},o.a.createElement(X.a,null,"Members"),null===t?null:-1===t?null:o.a.createElement(Z.a,null,o.a.createElement(o.a.Fragment,null,t.admin!==i._id?null:0===t.memberCandidates.length?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{component:"nav"},t.memberCandidates.map(function(e){var a=e._id,n=e.username;return o.a.createElement(K.a,{disableGutters:!0,key:a},o.a.createElement(Pe.a,null,o.a.createElement(Ge.a,null)),o.a.createElement(H.a,{primary:n}),o.a.createElement($.a,null,o.a.createElement(F.a,{edge:"end",onClick:r.bind(void 0,a,t._id,!0)},o.a.createElement(Ce.a,null)),o.a.createElement(F.a,{edge:"end",onClick:r.bind(void 0,a,t._id,!1)},o.a.createElement(V.a,null))))})),o.a.createElement(Re.a,null))),o.a.createElement(q.a,{component:"nav"},t.members.map(function(e){var a=e.username,n=e._id;return o.a.createElement(K.a,{disableGutters:!0,key:n},o.a.createElement(Pe.a,null,o.a.createElement(Ge.a,null)),o.a.createElement(H.a,{primary:a}))}))),o.a.createElement(ee.a,null,o.a.createElement(C.a,{color:"primary",onClick:a},"Close")))})},Ye=Object(y.a)({type:{display:"flex",marginTop:8,marginBottom:8}}),qe=function(e){var a=e.socket,n=Ye();return o.a.createElement(S,null,function(e){var t=e.handleConversationSettingsDialog,r=e.sendMessage,i=e.onChange,l=e.message;return o.a.createElement(E.a,{className:n.type},o.a.createElement(C.a,{color:"primary",variant:"outlined",onClick:t},o.a.createElement(Be.a,null)),o.a.createElement(U.a,{label:199===l.length?"1 character left":"".concat(200-l.length," characters left"),name:"message",fullWidth:!0,variant:"outlined",multiline:!0,value:l,rowsMax:"3",onKeyPress:function(e){"Enter"===e.key&&(r(a),e.preventDefault())},onChange:i}),o.a.createElement(C.a,{color:"primary",variant:"outlined",onClick:r.bind(void 0,a)},o.a.createElement(ie.a,null)),o.a.createElement(_e,null))})},ze=n(126),Ke=n.n(ze),He=function(e){function a(){var e;return Object(u.a)(this,a),(e=Object(d.a)(this,Object(v.a)(a).call(this))).socket=Ke()("/"),e}return Object(g.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.location.state.selectedConversation,a=this.props,n=a.goToConversation,t=a.updateConversation;n(e.id),this.socket.on("updatedConversation",function(e){return t(e)})}},{key:"componentWillUnmount",value:function(){var e=this.props.clearActiveConversation;this.socket.disconnect(),e()}},{key:"render",value:function(){var e=this;return o.a.createElement(S,null,function(a){var n=a.activeConversation;return o.a.createElement(o.a.Fragment,null,-1===n?o.a.createElement(de,{page:"chat"}):o.a.createElement(o.a.Fragment,null,o.a.createElement(Ae,null),o.a.createElement(qe,{socket:e.socket})))})}}]),a}(t.Component),$e=["All fields are required","Username has to have at least 3 characters","Username can not be longer than 10 characters","Password has to have at least 3 characters","Passwords did not match","This username is already in use","Conversation name has to have at least 3 characters","Conversation name can not be longer than 20 characters","Description can not be longer than 20 characters","This conversation name is already in use"],Qe=["There is no such conversation","You are already a member of this conversation, check the 'My Conversations' below","Join request sent","Your request is waiting for the admin's approval","You are not allowed to join this conversation"],Xe=Object(N.a)(),Ze=function(e){function a(){var e;return Object(u.a)(this,a),(e=Object(d.a)(this,Object(v.a)(a).call(this))).handleMessage=function(){e.setState({showRegisterSuccessMessage:!1,showLoginFailedMessage:!1})},e.handleChange=function(a){var n=a.target,t=n.name,o=n.value;e.setState(Object(c.a)({},t,o.substr(0,200)))},e.clearActiveConversation=function(){e.setState({activeConversation:null})},e.removeValidationError=function(a){var n=e.state.validationErrors,t=n.indexOf(a);-1!==t&&e.setState({validationErrors:n.filter(function(e,a){return t!==a})})},e.addValidationError=function(a){e.state.validationErrors.includes(a)||e.setState(function(e){return{validationErrors:[].concat(Object(s.a)(e.validationErrors),[a])}})},e.isValid=function(){var a=e.state,n=a.username,t=a.password,o=a.password2,r=!0;return""===n.trim()||""===t.trim()||""===o.trim()?(e.addValidationError(0),r=!1):e.removeValidationError(0),n.length<3?(e.addValidationError(1),r=!1):e.removeValidationError(1),n.length>10?(e.addValidationError(2),r=!1):e.removeValidationError(2),t.length<3?(e.addValidationError(3),r=!1):e.removeValidationError(3),t!==o?(e.addValidationError(4),r=!1):e.removeValidationError(4),r},e.isConversationValid=function(){var a=e.state,n=a.conversationName,t=a.conversationDescription,o=!0;return""===n.trim()||n.length<3?(e.addValidationError(6),o=!1):e.removeValidationError(6),n.length>20?(e.addValidationError(7),o=!1):e.removeValidationError(7),t.length>20?(e.addValidationError(8),o=!1):e.removeValidationError(8),o},e.handleSubmit=function(){if(e.isValid()){var a=e.state,n={username:a.username,password:a.password,password2:a.password2};De.a.post("/register",n).then(function(a){if(a.data.errors){var n=a.data.errors;e.setState({validationErrors:n})}else e.setState({username:"",password:"",password2:"",validationErrors:[],showRegisterSuccessMessage:!0})}).catch(function(e){return console.log(e)})}},e.handleLogin=function(){var a=e.state,n=a.loginPassword,t=a.loginUsername;if(""!==n.trim()&&""!==t.trim()){var o={loginUsername:t,loginPassword:n};De.a.post("/login",o).then(function(a){a.data.user&&(e.setState({authenticatedUser:a.data.user}),e.getConversationList())}).catch(function(a){401===a.response.status&&e.setState({showLoginFailedMessage:!0})}),e.setState({loginPassword:"",loginUsername:"",validationErrors:[],username:"",password:"",password2:""})}},e.handleLogout=function(){De.a.get("/logout").then(function(a){e.setState({authenticatedUser:a.data.user,conversationList:[]})})},e.whichSnackbar=function(){var a=e.state,n=a.showLoginFailedMessage,t=a.showRegisterSuccessMessage;return n||t?n?"error":"success":null},e.handleConverstaionDialog=function(){var a=e.state.conversationCreateDialogStatus;e.setState({conversationCreateDialogStatus:!a,conversationDescription:"",conversationName:"",validationErrors:[],conversationJoinStatus:""})},e.handleConverstaionJoinDialog=function(){var a=e.state.conversationJoinDialogStatus;e.setState({conversationJoinDialogStatus:!a,conversationJoinName:"",conversationJoinStatus:""})},e.handleConverstaionCreate=function(){var a=e.state,n=a.conversationName,t=a.conversationDescription;if(e.isConversationValid()){var o={conversationName:n,conversationDescription:t};De.a.post("/createConversation",o).then(function(a){a.data.conversationCreated?(e.getConversationList(),e.setState({conversationCreateDialogStatus:!1,conversationDescription:"",conversationName:"",validationErrors:[]})):a.data.error.conversationExists?e.setState({validationErrors:[9]}):console.log(a.data.error)}).catch(function(e){return console.log(e)})}},e.handleConverstaionJoin=function(){var a={conversationJoinName:e.state.conversationJoinName};De.a.post("/joinConversation",a).then(function(a){var n=a.data.status;e.setState({conversationJoinStatus:n,conversationJoinDialogStatus:!1,conversationJoinName:"",conversationInfoDialog:!0})})},e.handleConversationJoinInfoDialogStatus=function(){var a=e.state.conversationInfoDialog;e.setState({conversationInfoDialog:!a})},e.getConversationList=function(){e.setState({conversationList:-1}),setTimeout(function(){De.a.get("/getConversationList").then(function(a){var n=a.data.conversations;e.setState({conversationList:n.reverse()})})},1e3)},e.handleLeaveConfirmation=function(a){De.a.post("/leaveConversation",{id:a}).then(function(a){return a.data.left?e.getConversationList():null}).catch(function(e){return console.log(e)})},e.handleConversationSettingsDialog=function(){var a=e.state.conversationSettingsDialogStatus;e.setState({conversationSettingsDialogStatus:!a})},e.goToConversation=function(a){e.setState({activeConversation:-1}),setTimeout(function(){De.a.post("/getSelectedConversation",{id:a}).then(function(a){var n=a.data.selectedConversation;n&&e.setState({activeConversation:n})})},1e3)},e.newUser=function(a,n,t){De.a.post("/newUser",{userID:a,conversationID:n,status:t}).then(function(a){var n=a.data.conversation;n&&e.setState({activeConversation:n})})},e.sendMessage=function(a){e.setState({message:""});var n=e.state,t=n.message,o=n.activeConversation._id;t.length<200&&""!==t.trim()&&a.emit("newMessage",{message:t,_id:o})},e.calculateTimesAgo=function(e){var a=new Date-new Date(e),n=Math.floor(a/1e3),t=Math.floor(n/60),o=Math.floor(t/60),r=Math.floor(o/24),i=Math.floor(r/30);return 0===t?"now":1===t?"1 minute ago":t<60?"".concat(t," minutes ago"):1===o?"1 hour ago":o<24?"".concat(o," hours ago"):1===r?"1 day ago":r<30?"".concat(r," days ago"):1===i?"1 month ago":r>=30?"".concat(i," months ago"):void 0},e.updateConversation=function(a){e.setState({activeConversation:a})},e.state={username:"",password:"",password2:"",validationErrors:[],showRegisterSuccessMessage:!1,loginUsername:"",loginPassword:"",authenticatedUser:-1,showLoginFailedMessage:!1,conversationCreateDialogStatus:!1,conversationJoinDialogStatus:!1,conversationName:"",conversationJoinName:"",conversationDescription:"",conversationList:[],deleteConfirmationStatus:!1,conversationJoinStatus:"",conversationInfoDialog:!1,conversationSettingsDialogStatus:!1,activeConversation:null,message:""},e}return Object(g.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;De.a.get("/isLoggedIn").then(function(a){var n=a.data.user;e.setState({authenticatedUser:n}),e.state.authenticatedUser&&e.getConversationList()})}},{key:"render",value:function(){var e=this.state.authenticatedUser;return o.a.createElement(o.a.Fragment,null,-1===e?null:o.a.createElement(w,{value:Object(l.a)({errors:$e,conversationJoinMessages:Qe},this.state,{onChange:this.handleChange,onClick:this.handleSubmit,handleMessage:this.handleMessage,onLogin:this.handleLogin,handleLogout:this.handleLogout,whichSnackbar:this.whichSnackbar,handleConverstaionDialog:this.handleConverstaionDialog,handleConverstaionCreate:this.handleConverstaionCreate,getConversationList:this.getConversationList,handleLeaveConfirmation:this.handleLeaveConfirmation,handleConverstaionJoinDialog:this.handleConverstaionJoinDialog,handleConverstaionJoin:this.handleConverstaionJoin,handleConversationJoinInfoDialogStatus:this.handleConversationJoinInfoDialogStatus,handleConversationSettingsDialog:this.handleConversationSettingsDialog,goToConversation:this.goToConversation,newUser:this.newUser,sendMessage:this.sendMessage,calculateTimesAgo:this.calculateTimesAgo,updateConversation:this.updateConversation,clearActiveConversation:this.clearActiveConversation})},o.a.createElement(L.a,{theme:Xe},o.a.createElement(O,null),o.a.createElement(M.a,{maxWidth:"lg",style:{flexGrow:"1",display:"flex",flexDirection:"column",overflow:"auto"}},o.a.createElement(xe.d,null,o.a.createElement(Me,{exact:!0,path:"/",component:_}),o.a.createElement(Oe,{exact:!0,path:"/dashboard",component:Se}),o.a.createElement(Le,{exact:!0,path:"/chat",component:He,component2:Se}),o.a.createElement(xe.b,{component:ye}))))))}}]),a}(t.Component),ea=Object(xe.g)(function(e){return o.a.createElement(Ze,e)});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(D.a,null,o.a.createElement(ea,null)," "),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[135,1,2]]]);
//# sourceMappingURL=main.da92eddc.chunk.js.map